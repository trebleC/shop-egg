(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ca0fbbc"],{"0007":function(e,t,a){},"0551":function(e,t,a){"use strict";a("a6bf")},1:function(e,t){},2:function(e,t){},"2ade":function(e,t,a){"use strict";var i=a("cebe"),r=a.n(i),o=a("5c96");a("f3e4");const s=r.a.create({baseURL:"/api",timeout:12e4});s.interceptors.response.use(e=>{const t=e.data,a=t.code,i=t.message;return 0===a?t:(Object(o["Message"])({type:"error",message:i}),Promise.reject("error"))},e=>{const t=e.response.data.status;return t||Object(o["Message"])({type:"error",message:"接口请求失败"}),Promise.reject(e)}),t["a"]=s},3:function(e,t){},"333d":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pagination-wrapper"},[t("el-pagination",{attrs:{background:e.background,"current-page":e.pageNo,"page-sizes":e.pageSizes,"page-size":e.pageSize,total:e.total,layout:e.layout},on:{"update:currentPage":function(t){e.pageNo=t},"update:current-page":function(t){e.pageNo=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},r=[],o={name:"Pagination",props:{page:{type:Number,default:1,required:!0},limit:{type:Number,default:10,required:!0},background:{type:Boolean,default:!0},pageSizes:{type:Array,default:()=>[10,15,20,50]},total:{type:Number,default:0,required:!0},layout:{type:String,default:"total, prev, pager, next, sizes, jumper"}},computed:{pageNo:{get(){return this.page},set(e){this.$emit("update:page",e)}},pageSize:{get(){return this.limit},set(e){this.emit("update:limit",e)}}},methods:{handleSizeChange(e){this.$emit("pagination",{page:this.pageNo,limit:e})},handleCurrentChange(e){this.$emit("pagination",{page:e,limit:this.pageSize})}}},s=o,l=(a("dcd0"),a("2877")),n=Object(l["a"])(s,i,r,!1,null,null,null);t["a"]=n.exports},3890:function(e,t,a){"use strict";a("42aa")},"3cde":function(e,t,a){},"42aa":function(e,t,a){},"4de4":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"table-classic-wrapper"},[t("el-card",{attrs:{shadow:"always"}},[t("div",{staticClass:"control-btns"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleCreate}},[e._v("新建产品")])],1),t("el-form",{ref:"searchForm",staticClass:"search-form",attrs:{inline:!0,model:e.listQuery,"label-width":"90px"}},[t("el-form-item",{attrs:{label:"产品名称"}},[t("el-input",{attrs:{placeholder:"产品名称"},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}})],1),t("el-form-item",{attrs:{label:"产品系列"}},[t("el-select",{attrs:{placeholder:"产品系列"},model:{value:e.listQuery.categoryId,callback:function(t){e.$set(e.listQuery,"categoryId",t)},expression:"listQuery.categoryId"}},e._l(e.selectData,(function(e,a){return t("el-option",{key:"w"+a,attrs:{value:e.categoryId,label:e.categoryName}})})),1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),t("el-button",{attrs:{type:"primary"},on:{click:e.onReset}},[e._v("重置")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",size:"medium"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{prop:"name",label:"产品名称",align:"left",width:"200",sortable:""}}),t("el-table-column",{attrs:{prop:"goodNo",label:"产品编号",align:"left",width:"150",sortable:""}}),t("el-table-column",{attrs:{prop:"categoryName",label:"产品系列",align:"left",width:"200",sortable:""}}),t("el-table-column",{attrs:{prop:"views",label:"浏览量",align:"left",width:"150",sortable:""}}),t("el-table-column",{attrs:{label:"产品描述",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.desc))]}}])}),t("el-table-column",{attrs:{label:"附件材料",align:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",e._l(a.row.attachments,(function(a){return t("img",{staticStyle:{width:"40px",height:"40px","margin-right":"5px",cursor:"pointer"},attrs:{src:a.url,alt:""},on:{click:function(t){return e.showImage(a)}}})})),0)]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",disabled:a.row.forbid},on:{click:function(t){return e.handleEdit(a.$index,a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a.$index,a.row)}}},[e._v("删除")])]}}])})],1),t("el-dialog",{staticClass:"dialog-form",attrs:{title:"新建系列",visible:e.formVisible,width:"50%","before-close":e.handleClose},on:{"update:visible":function(t){e.formVisible=t}}},[t("el-form",{ref:"dialogForm",attrs:{model:e.categoryForm,rules:e.categoryRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"系列名称：",prop:"categoryName"}},[t("el-input",{model:{value:e.categoryForm.categoryName,callback:function(t){e.$set(e.categoryForm,"categoryName",t)},expression:"categoryForm.categoryName"}})],1),t("el-form-item",{attrs:{label:"系列描述："}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.categoryForm.desc,callback:function(t){e.$set(e.categoryForm,"desc",t)},expression:"categoryForm.desc"}})],1),t("el-form-item",{attrs:{label:"系列材料：",prop:"attachments"}},[t("ImageUpload",{key:e.categoryId+"img",attrs:{list:e.categoryForm.attachments},on:{"on-success":e.getFileList,"on-delete":e.getDeleteFileList}})],1),t("div",{staticClass:"footer-item"},[t("el-button",{on:{click:e.cancleForm}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",disabled:e.isSubmit},on:{click:function(t){return e.submitForm("dialogForm")}}},[e._v("确 定")])],1)],1)],1),t("el-dialog",{attrs:{title:"导入数据",visible:e.importVisible,width:"20%"},on:{"update:visible":function(t){e.importVisible=t}}},[t("div",{staticClass:"upload-box"},[t("span",[e._v("选择文件：")]),t("Upload",{attrs:{"files-format":e.filesFormat}},[t("i",{staticClass:"vue-dsn-icon-upload"}),e._v("上传文件 ")])],1),t("div",{staticClass:"hints"},[e._v("TIP：请选择要导出数据的格式。")]),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancleImport}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.confirmImport}},[e._v("确 定")])],1)]),t("el-dialog",{attrs:{title:"导出数据",visible:e.exportVisible,width:"30%"},on:{"update:visible":function(t){e.exportVisible=t}}},[t("div",{staticClass:"export-data"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.exportTable("xlsx")}}},[e._v("EXCEL格式")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.exportTable("csv")}}},[e._v("CSV格式")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.exportTable("txt")}}},[e._v("TXT格式")])],1),t("div",{staticClass:"hints"},[e._v("TIP：请选择要导出数据的格式。")])])],1),t("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},r=[],o=(a("14d9"),a("c405")),s=a("5a4a"),l=a("cd77"),n=a("333d"),c=a("c7f0"),u=a("b522"),d=a("6b45"),p={name:"Good",components:{Pagination:n["a"],Upload:c["a"],Hints:u["a"],ImageUpload:d["a"]},data(){return{listLoading:!0,listQuery:{name:null,categoryId:null,pageNo:1,pageSize:100},dialogForm:{name:void 0,phone:void 0,married:void 0,hobby:[]},total:0,tableData:[],multipleSelection:[],formVisible:!1,formRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}]},isSubmit:!1,importVisible:!1,filesFormat:".txt, .csv, .xls, .xlsx",exportVisible:!1,dialogImageUrl:"",dialogVisible:!1,categoryRules:{categoryName:[{required:!0,message:"请输入系列名称",trigger:"blur"}]},categoryForm:{categoryName:"",desc:"",attachments:[]},categoryId:"",selectData:[]}},created(){Object(o["c"])().then(e=>{this.selectData=e.data,this.fetchData()})},methods:{showImage(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleSelectionChange(e){this.multipleSelection=e},handleCreate(){this.$router.push({path:"/good/createGood"})},handleEdit(e,t){this.$router.push({path:"/good/createGood?goodId="+t.goodId})},handleDelete(e,t){console.log(e,t),this.$confirm("此操作将删除选中数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(s["a"])({goodId:t.goodId}).then(e=>{this.$message({type:"success",message:"删除成功!"}),this.fetchData()})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},batchDelete(){this.multipleSelection.length<1?this.$message({message:"请先选择要删除的数据！",type:"warning"}):this.handleDelete()},handleClose(){this.formVisible=!1,this.$refs.dialogForm.resetFields()},fetchData(){this.listLoading=!0,Object(s["c"])(this.listQuery).then(e=>{0===e.code&&(e.data.map(e=>(this.selectData.map(t=>{t.categoryId==e.categoryId&&(e.categoryName=t.categoryName)}),e)),this.total=e.data.length,this.tableData=e.data,this.listLoading=!1)}).catch(()=>{this.listLoading=!1})},onSubmit(){this.listQuery.pageNo=1,this.fetchData()},onReset(){for(const e in this.listQuery)this.listQuery[e]="";this.fetchData()},handleImport(){this.importVisible=!0},submitForm(e){this.$refs[e].validate(e=>{if(!e)return this.isSubmit=!1,!1;this.saveCategory(),this.formVisible=!1})},cancleForm(){this.$refs.dialogForm.resetFields(),this.formVisible=!1},confirmImport(){this.importVisible=!1},cancleImport(){this.importVisible=!1},exportTable(e){if(this.tableData.length){const t={header:["编号","姓名","性别","手机","学历","婚姻状况","禁止编辑","爱好"],key:["id","name","sex","phone","education","married","forbid","hobby"],data:this.tableData,autoWidth:!0,fileName:"综合表格",bookType:e};l["a"].exportDataToExcel(t),this.exportVisible=!1}},selectChange(e){},stateChange(e){},getFileList(e){this.categoryForm.attachments.push(e)},getDeleteFileList(e){this.categoryForm.attachments=e},saveCategory(){this.categoryForm,this.categoryId;saveCategory(this.categoryForm).then(e=>{this.fetchData()})}}},m=p,g=(a("75a2"),a("2877")),h=Object(g["a"])(m,i,r,!1,null,null,null);t["default"]=h.exports},"5a4a":function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return l}));var i=a("2ade");function r(e){return Object(i["a"])({url:"/saveGood",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/queryGood",method:"get",params:e})}function s(e){return Object(i["a"])({url:"/queryGoodList",method:"get",params:e})}function l(e){return Object(i["a"])({url:"/deleteGood",method:"get",params:e})}},"6b45":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("el-upload",{ref:"uploadImage",staticClass:"upload-image-wrapper",attrs:{"list-type":"picture-card",action:"",accept:".jpg, .png, .bmp, .jpeg, .webp",multiple:!0,"show-file-list":!0,"auto-upload":!0,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"http-request":e.httpRequest,li:"","before-upload":e.beforeUpload,"file-list":e.fileList}},[e.btnName?t("el-button",{attrs:{size:"small",type:"primary"}},[e._v(e._s(e.btnName))]):t("i",{staticClass:"el-icon-plus"}),t("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},r=[],o=(a("88a7"),a("271a"),a("5494"),a("2ade"));function s(e){return Object(o["a"])({url:"/upload",method:"post",headers:{"Content-type":"multipart/form-data"},data:e})}var l={name:"UploadImage",props:{btnName:{type:String,default:""},list:{type:Array,default(){return[]}}},data(){return{fileList:[],dialogImageUrl:"",dialogVisible:!1}},created(){this.fileList=JSON.parse(JSON.stringify(this.list))},methods:{httpRequest(e){const t=new FormData;t.append("file",e.file),t.append("name",e.file.name),s(t).then(e=>{this.$emit("on-success",e.data)})},handlePictureCardPreview(e,t){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleRemove(e,t){this.$emit("on-delete",t.map(e=>({attachmentId:e.attachmentId,name:e.name,url:e.url})))},beforeUpload(e){let t=e.name.split(".");t.pop(1);let a=t.join(".");const i=/\.(jpg|png|bmp|jpeg|webp)$/.test(e.name),r=/^[a-zA-Z0-9\-_\.]{1,20}$/.test(a);e.size;return i?r?void 0:(this.$message.error("上传文件名称需为1~20个英文、数字、点号、连字符或下划线"),Promise.reject(!1)):(this.$message.error("上传文件只能是.zip .rar .bin .apk格式!"),!1)},handleChange(e){console.log("handleChange");const t=e.raw;return!!t&&(this.isImage(t)?void(this.isLimit5M(t)&&this.readImage(t)):(this.$message.warning("图片只支持.jpg, .png, .bmp, .jpeg, .webp格式!"),!1))},isLimit5M(e){const t=e.size/1024/1024<5;return!!t||(this.$message.warning("上传的图片大小不能超过5M!"),!1)},isImage(e){return/\.(jpg|png|bmp|jpeg|webp)$/.test(e.name)},readImage(e){const t=new FileReader;t.onload=e=>{let t;t="object"===typeof e.target.result?window.URL.createObjectURL(new Blob([e.target.result])):e.target.result,this.$emit("on-success",t)},t.readAsDataURL(e),t.onerror=e=>{this.$message.error("图片读取出错!")},this.$refs.uploadImage.clearFiles()}}},n=l,c=(a("901b"),a("2877")),u=Object(c["a"])(n,i,r,!1,null,"cf04fbee",null);t["a"]=u.exports},"75a2":function(e,t,a){"use strict";a("3cde")},"901b":function(e,t,a){"use strict";a("0007")},a597:function(e,t,a){},a6bf:function(e,t,a){},b522:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"hints-wrapper"},[t("div",{staticClass:"hint-title"},[t("i",{staticClass:"vue-dsn-icon-tishi"}),t("span",[e._t("hintName")],2)]),t("div",{staticClass:"hint-info"},[e._t("hintInfo")],2)])},r=[],o={name:"Hints"},s=o,l=(a("3890"),a("2877")),n=Object(l["a"])(s,i,r,!1,null,null,null);t["a"]=n.exports},c405:function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return l}));var i=a("2ade");function r(e){return Object(i["a"])({url:"/saveCategory",method:"post",data:e})}function o(){return Object(i["a"])({url:"/queryCategoryList",method:"get"})}function s(e){return Object(i["a"])({url:"/deleteCategory",method:"get",params:e})}function l(){return Object(i["a"])({url:"/queryCategoryMap",method:"get"})}},c7f0:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("el-upload",{staticClass:"files-upload",attrs:{action:e.url,accept:e.filesFormat,multiple:e.isMultiple,"show-file-list":e.isShowList,"on-success":e.uploadSuccess,"on-error":e.uploadError}},[e._t("default")],2)},r=[],o={name:"Upload",props:{url:{type:String,default:""},filesFormat:{type:String,default:""},isMultiple:{type:Boolean,default:!1},isShowList:{type:Boolean,default:!1}},methods:{uploadSuccess(e,t){if([200,0].includes(e.code)){const t=e.data;this.$emit("on-success",t)}else this.$emit("on-error"),this.$message.error(e.msg)},uploadError(e,t){this.$emit("on-error")}}},s=o,l=(a("0551"),a("2877")),n=Object(l["a"])(s,i,r,!1,null,null,null);t["a"]=n.exports},cd77:function(e,t,a){"use strict";a("907a"),a("986a"),a("1d02"),a("3c5d"),a("6ce5"),a("2834"),a("4ea1"),a("14d9");var i=a("1146"),r=a.n(i),o=a("21a6");function s(e,t){const a=t.map(e=>e.map(e=>null==e?{wch:10}:e.toString().charCodeAt(0)>255?{wch:2*e.toString().length}:{wch:e.toString().length})),i=a[0];for(let r=1;r<a.length;r++)for(let e=0;e<a[r].length;e++)i[e].wch<a[r][e].wch&&(i[e].wch=a[r][e].wch);e["!cols"]=i}function l(e,t){return t.map(t=>e.map(e=>t[e]))}function n(e){const t=new ArrayBuffer(e.length),a=new Uint8Array(t);for(let i=0;i!==e.length;++i)a[i]=255&e.charCodeAt(i);return t}function c({header:e,key:t,data:a,fileName:i,autoWidth:c=!0,bookType:u="xlsx"}={}){const d=r.a.utils.book_new(),p=l(t,a);i=i||"excel-list",p.unshift(e);const m=r.a.utils.aoa_to_sheet(p);c&&s(m,p),r.a.utils.book_append_sheet(d,m,i);const g=r.a.write(d,{bookType:u,bookSST:!1,type:"binary"});Object(o["saveAs"])(new Blob([n(g)],{type:"application/octet-stream"}),`${i}.${u}`)}function u(e){const t=[],a=r.a.utils.decode_range(e["!ref"]);let i;const o=a.s.r;for(i=a.s.c;i<=a.e.c;++i){const a=e[r.a.utils.encode_cell({c:i,r:o})];let s="UNKNOWN "+i;a&&a.t&&(s=r.a.utils.format_cell(a)),t.push(s)}return t}function d(e,t){const a=r.a.read(e,{type:t}),i=a.SheetNames[0],o=a.Sheets[i],s=u(o),l=r.a.utils.sheet_to_json(o);return{header:s,results:l}}t["a"]={exportDataToExcel:c,readDataFromExcel:d}},dcd0:function(e,t,a){"use strict";a("a597")}}]);